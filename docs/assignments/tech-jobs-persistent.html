<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Assignment #4: Tech Jobs (Persistent Edition) &#8212; Java Web Development  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Thymeleaf Commands" href="../appendices/spring/thymeleaf.html" />
    <link rel="prev" title="Assignment #3: Tech Jobs (MVC Edition)" href="tech-jobs-mvc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../index.html">Contents</a></li>
    <li class="active">Assignment #4: Tech Jobs (Persistent Edition)</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="assignment-4-tech-jobs-persistent-edition">
<span id="tech-jobs-persistent"></span><h1>Assignment #4: Tech Jobs (Persistent Edition)<a class="headerlink" href="#assignment-4-tech-jobs-persistent-edition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="your-task">
<h2>Your Task<a class="headerlink" href="#your-task" title="Permalink to this headline">¶</a></h2>
<p>You will once again work with the <code class="docutils literal notranslate"><span class="pre">techjobs</span></code> application. This time around you’ll add ORM
functionality by using Spring Data.</p>
</div>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Configure an individual class to be managed by Spring Data</li>
<li>Configure a one-to-many relationship to be managed by Spring Data</li>
<li>Configure a many-to-many relationship to be managed by Spring Data</li>
<li>Create a SQL report</li>
</ol>
</div>
<div class="section" id="setup">
<span id="tech-jobs-persistent-setup"></span><h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Connect a database to a Spring App.</p>
</div>
<div class="section" id="part-1-persisting-a-single-class">
<h2>Part 1: Persisting a Single Class<a class="headerlink" href="#part-1-persisting-a-single-class" title="Permalink to this headline">¶</a></h2>
<p>Be sure you’ve completed the <a class="reference internal" href="#tech-jobs-persistent-setup"><span class="std std-ref">setup steps</span></a> before starting this
section.</p>
<p>If you get stuck on any of the steps here, refer to the video lesson, or
other code within the program that was provided. You’ll often find the
answers there.</p>
<div class="section" id="setting-up-the-new-model">
<h3>Setting Up the New Model<a class="headerlink" href="#setting-up-the-new-model" title="Permalink to this headline">¶</a></h3>
<p>We’ll use Spring Data – along with JPA and Hibernate – to create an
object-relational mapping for a new class.</p>
<ol class="arabic simple">
<li>update the classes: Job + Employer</li>
<li>use the &#64;Entity annotation</li>
<li>id creation, getters and setters, constructors</li>
<li>id annotation, generated value annotation</li>
<li>validation annotations on fields</li>
</ol>
</div>
<div class="section" id="setting-up-the-data-layer">
<h3>Setting Up the Data Layer<a class="headerlink" href="#setting-up-the-data-layer" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>JobRepository interface creation, extend crud repo, transactional annotation</li>
</ol>
</div>
<div class="section" id="adding-jobs">
<h3>Adding Jobs<a class="headerlink" href="#adding-jobs" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>add JobRepository to homecontroller with &#64;autowired annotation</li>
</ol>
</div>
<div class="section" id="view-all-jobs">
<h3>View All Jobs<a class="headerlink" href="#view-all-jobs" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>create view template for accessing individual job info.</li>
</ol>
</div>
<div class="section" id="add-jobs">
<h3>Add Jobs<a class="headerlink" href="#add-jobs" title="Permalink to this headline">¶</a></h3>
<p>Next, we want to enable the user to create a new category via a form.
This will require multiple steps.</p>
</div>
<div class="section" id="add-handler-methods">
<h3>Add Handler Methods<a class="headerlink" href="#add-handler-methods" title="Permalink to this headline">¶</a></h3>
<p>Let’s add controller handlers to render and process the form.</p>
<p>Create an <code class="docutils literal notranslate"><span class="pre">add</span></code> handler within <code class="docutils literal notranslate"><span class="pre">CategoryController</span></code> with input
parameter <code class="docutils literal notranslate"><span class="pre">Model</span> <span class="pre">model</span></code>. It should create a new <code class="docutils literal notranslate"><span class="pre">Category</span></code> object
using the default constructor and pass it into the view with key
<code class="docutils literal notranslate"><span class="pre">&quot;category&quot;</span></code> (you can do this with the shorthand
<code class="docutils literal notranslate"><span class="pre">model.addAttribute(new</span> <span class="pre">Category())</span></code>; note the omission of a
string/key argument). Add the title “Add Category” to <code class="docutils literal notranslate"><span class="pre">model</span></code> as well.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">add</span></code> handler should accept <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests at <code class="docutils literal notranslate"><span class="pre">/category/add</span></code>
(recall that you set the path segment “category” at the controller level
already). The handler should render the <code class="docutils literal notranslate"><span class="pre">category/add</span></code> template (we’ll
add this template in a moment).</p>
<p>Create another <code class="docutils literal notranslate"><span class="pre">add</span></code> handler that accepts <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests at
<code class="docutils literal notranslate"><span class="pre">/category/add</span></code>. Its signature should be:</p>
<div class="code java highlight-none notranslate"><div class="highlight"><pre><span></span>public String add(Model model,
    @ModelAttribute @Valid Category category, Errors errors)
</pre></div>
</div>
<p>Within this second <code class="docutils literal notranslate"><span class="pre">add</span></code> handler: - Determine whether or not there are
any validation errors. If there are, return the form at
<code class="docutils literal notranslate"><span class="pre">category/add</span></code>. - If the form submission is valid: - Save the new
<code class="docutils literal notranslate"><span class="pre">Category</span></code> object by calling <code class="docutils literal notranslate"><span class="pre">categoryDao.save(category)</span></code>. -
Redirect to the <code class="docutils literal notranslate"><span class="pre">index</span></code> handler for <code class="docutils literal notranslate"><span class="pre">CategoryController</span></code> by
returning the string <code class="docutils literal notranslate"><span class="pre">&quot;redirect:&quot;</span></code>.</p>
</div>
<div class="section" id="add-view">
<h3>Add View<a class="headerlink" href="#add-view" title="Permalink to this headline">¶</a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">resources/templates/category/</span></code> create a new template,
<code class="docutils literal notranslate"><span class="pre">add.html</span></code>. Within the template, create a form that uses the
<code class="docutils literal notranslate"><span class="pre">category</span></code> object that you passed in from the controller.</p>
<p>You’ll need to bind the object to the form using
<code class="docutils literal notranslate"><span class="pre">th:object=&quot;${category}&quot;</span></code>. And you should use the appropriate
attributes within the form: <code class="docutils literal notranslate"><span class="pre">th:for</span></code>, <code class="docutils literal notranslate"><span class="pre">th:field</span></code>, <code class="docutils literal notranslate"><span class="pre">th:errors</span></code>.</p>
<p>This is the same technique we’ve been using over the last couple of
weeks.</p>
<div class="section" id="adding-navigation-links">
<h4>Adding Navigation Links<a class="headerlink" href="#adding-navigation-links" title="Permalink to this headline">¶</a></h4>
<p>Let’s make it easy to navigate to the new views that we’ve created.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">fragments.html</span></code> template, add a link to <code class="docutils literal notranslate"><span class="pre">/category</span></code> to
the list of navigation links.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">category/index.html</span></code> template, add a link to
<code class="docutils literal notranslate"><span class="pre">/category/add</span></code> with the text “Add Category”. Place this link below
the list.</p>
</div>
</div>
</div>
<div class="section" id="test">
<h2>Test!<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h2>
<p>Start up your application – don’t forget to start MAMP first – and try
to add a new category!</p>
<p>Click on the <em>Categories</em> navigation link, then on <em>Add Category</em>.
Complete the form, and if everything works as expected, you’ll see your
new category in the list. If everything seems to work – that is, you are
able to submit the form without any errors – but you don’t see your
category in the list, here’s what you should check:</p>
<ul class="simple">
<li>Is there any data in the <code class="docutils literal notranslate"><span class="pre">categories</span></code> table? Check by going to MAMP
and hitting the <em>Open Start Page</em> button, then navigating to <em>Tools &gt;
phpMyAdmin</em>. Find the <code class="docutils literal notranslate"><span class="pre">cheese-mvc-data</span></code> database, and look within
the <code class="docutils literal notranslate"><span class="pre">categories</span></code>. If there isn’t any data in the table, you
probably forgot to save the category when processing the form.</li>
<li>If there’s data in the database, check that you are correctly
querying for the list of all categories in
<code class="docutils literal notranslate"><span class="pre">CategoryController.index</span></code>: <code class="docutils literal notranslate"><span class="pre">categoryDao.findAll()</span></code>.</li>
<li>Ensure you’re passing this list into the view, and looping over the
list of categories to display them in the page.</li>
</ul>
<p>When everything works, move on to <a class="reference external" href="../one-to-many/" target="_blank">Part 2<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
<div class="section" id="one-to-many">
<h2>One-To-Many<a class="headerlink" href="#one-to-many" title="Permalink to this headline">¶</a></h2>
<p>One job has one employer. One employer can have many jobs.</p>
</div>
<div class="section" id="many-to-many">
<h2>Many-To-Many<a class="headerlink" href="#many-to-many" title="Permalink to this headline">¶</a></h2>
<p>Job to Skills</p>
</div>
<div class="section" id="sql-report">
<h2>SQL Report<a class="headerlink" href="#sql-report" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-submit">
<h2>How to Submit<a class="headerlink" href="#how-to-submit" title="Permalink to this headline">¶</a></h2>
<p>To turn in your assignment and get credit, follow the <a class="reference internal" href="how-to-submit.html#how-to-submit-work"><span class="std std-ref">submission instructions</span></a>.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tech-jobs-mvc.html"><span aria-hidden="true">&larr;</span> Assignment #3: Tech Jobs (MVC Edition)</a></li>
        
        
        <li class="next"><a href="../appendices/spring/thymeleaf.html">Thymeleaf Commands <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/assignments/tech-jobs-persistent.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>