<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Assignment #4: Tech Jobs (Persistent Edition) &#8212; Java Web Development  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Thymeleaf Commands" href="../appendices/spring/thymeleaf.html" />
    <link rel="prev" title="Assignment #3: Tech Jobs (MVC Edition)" href="tech-jobs-mvc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../index.html">Contents</a></li>
    <li class="active">Assignment #4: Tech Jobs (Persistent Edition)</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="assignment-4-tech-jobs-persistent-edition">
<span id="tech-jobs-persistent"></span><h1>Assignment #4: Tech Jobs (Persistent Edition)<a class="headerlink" href="#assignment-4-tech-jobs-persistent-edition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="your-task">
<h2>Your Task<a class="headerlink" href="#your-task" title="Permalink to this headline">¶</a></h2>
<p>You will once again work with the <code class="docutils literal notranslate"><span class="pre">techjobs</span></code> application. This time around you’ll add ORM
functionality by using Spring Data.</p>
</div>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Configure an individual class to be managed by Spring Data</li>
<li>Configure a one-to-many relationship to be managed by Spring Data</li>
<li>Configure a many-to-many relationship to be managed by Spring Data</li>
<li>Create a SQL report</li>
</ol>
</div>
<div class="section" id="setup">
<span id="tech-jobs-persistent-setup"></span><h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Connect a database to a Spring App.</p>
</div>
<div class="section" id="part-1-persisting-a-single-class">
<h2>Part 1: Persisting a Single Class<a class="headerlink" href="#part-1-persisting-a-single-class" title="Permalink to this headline">¶</a></h2>
<p>Be sure you’ve completed the <a class="reference internal" href="#tech-jobs-persistent-setup"><span class="std std-ref">setup steps</span></a> before starting this
section.</p>
<p>If you get stuck on any of the steps here, refer to the video lesson, or
other code within the program that was provided. You’ll often find the
answers there.</p>
<div class="section" id="setting-up-the-new-model">
<h3>Setting Up the New Model<a class="headerlink" href="#setting-up-the-new-model" title="Permalink to this headline">¶</a></h3>
<p>We’ll use Spring Data – along with JPA and Hibernate – to create an
object-relational mapping for a new class.</p>
<ol class="arabic simple">
<li>update the classes: Job + Employer</li>
<li>use the &#64;Entity annotation</li>
<li>id creation, getters and setters, constructors</li>
<li>id annotation, generated value annotation</li>
<li>validation annotations on fields</li>
</ol>
</div>
<div class="section" id="setting-up-the-data-layer">
<h3>Setting Up the Data Layer<a class="headerlink" href="#setting-up-the-data-layer" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>JobRepository interface creation, extend crud repo, transactional annotation</li>
</ol>
</div>
<div class="section" id="adding-jobs">
<h3>Adding Jobs<a class="headerlink" href="#adding-jobs" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>add JobRepository to homecontroller with &#64;autowired annotation</li>
</ol>
</div>
<div class="section" id="view-all-jobs">
<h3>View All Jobs<a class="headerlink" href="#view-all-jobs" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>create view template for accessing individual job info.</li>
</ol>
</div>
<div class="section" id="add-jobs">
<h3>Add Jobs<a class="headerlink" href="#add-jobs" title="Permalink to this headline">¶</a></h3>
<p>#. Next, we want to enable the user to create a new category via a form.
This will require multiple steps.</p>
</div>
<div class="section" id="add-handler-methods">
<h3>Add Handler Methods<a class="headerlink" href="#add-handler-methods" title="Permalink to this headline">¶</a></h3>
<p>Let’s add controller handlers to render and process the form.</p>
<ol class="arabic simple">
<li>create an add handler in homecontroller for adding jobs</li>
<li>create another handler for the posting of this form</li>
<li>check for object validation and if good, use the crudrepository mehtod to save the object</li>
</ol>
</div>
<div class="section" id="add-view">
<h3>Add View<a class="headerlink" href="#add-view" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>create the template to add jobs via a form</li>
</ol>
</div>
<div class="section" id="adding-navigation-links">
<h3>Adding Navigation Links<a class="headerlink" href="#adding-navigation-links" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>add a link to the add jobs form - TechJobs title in the nav bar</li>
</ol>
</div>
<div class="section" id="test">
<h3>Test!<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>Start up your application – don’t forget to have our SQL server running – and try
to add a new job!</p>
<p>Click on the <em>TechJobs</em> navigation link, then on <em>Add Job</em>.
Complete the form, and if everything works as expected, you’ll see your
new job in the list. If everything seems to work – that is, you are
able to submit the form without any errors – but you don’t see your
job in the list, here’s what you should check:</p>
<ul class="simple">
<li>Is there any data in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> table? Check by going to MySQL Workbench
and looking for the job data within your schema.</li>
</ul>
<ul class="simple">
<li>If there’s data in the database, check that you are correctly
querying for the list of all jobs in the controller
findAll()``?</li>
<li>Ensure you’re passing this list into the view, and looping over the
list of jobs to display them in the page.</li>
</ul>
<p>When everything works, move on to Part 2 below.</p>
</div>
</div>
<div class="section" id="part-2-setting-up-a-one-to-many-relationship">
<h2>Part 2: Setting Up a One-to-Many Relationship<a class="headerlink" href="#part-2-setting-up-a-one-to-many-relationship" title="Permalink to this headline">¶</a></h2>
<p>One job has one employer. One employer can have many jobs.</p>
<div class="section" id="add-an-employer-to-a-job">
<h3>Add an Employer to a Job<a class="headerlink" href="#add-an-employer-to-a-job" title="Permalink to this headline">¶</a></h3>
<p>Within <code class="docutils literal notranslate"><span class="pre">Employer</span></code>, add a private property <code class="docutils literal notranslate"><span class="pre">jobs</span></code> of type
<code class="docutils literal notranslate"><span class="pre">List&lt;Job&gt;</span></code> and initialize it to an empty <code class="docutils literal notranslate"><span class="pre">ArrayList</span></code>. After we
set up the <code class="docutils literal notranslate"><span class="pre">Job</span></code> class to work with <code class="docutils literal notranslate"><span class="pre">Employer</span></code> objects, this list
will represent the list of all items in a given job. We’ll do this
in a bit.</p>
<ol class="arabic simple">
<li>use the onetomany and join column annotations on the jobs list in Employer class</li>
</ol>
</div>
<div class="section" id="replace-string-employer-with-employer-object">
<h3>Replace String Employer with Employer Object<a class="headerlink" href="#replace-string-employer-with-employer-object" title="Permalink to this headline">¶</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">Employer</span></code> class as a field on Job objects will be much
more flexible, as it will allow users to create new employers
themselves.</p>
<ol class="arabic simple">
<li>add the &#64;manytoone annotation on an employer field in Job</li>
</ol>
</div>
<div class="section" id="updating-homecontroller">
<h3>Updating HomeController<a class="headerlink" href="#updating-homecontroller" title="Permalink to this headline">¶</a></h3>
<p>We’ll make several updates here.</p>
<div class="section" id="displayaddcheeseform">
<h4>displayAddCheeseForm<a class="headerlink" href="#displayaddcheeseform" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>wire up homecontroller with the employerrepository.</li>
<li>update the addjob handlers so that they grab the employer information</li>
<li>update the add job form to include an employer selection option</li>
</ol>
</div>
<div class="section" id="processaddcheeseform">
<h4>processAddCheeseForm<a class="headerlink" href="#processaddcheeseform" title="Permalink to this headline">¶</a></h4>
<p>This action creates a new cheese. Based on our updates to <code class="docutils literal notranslate"><span class="pre">add.html</span></code>
above, we can add <code class="docutils literal notranslate"><span class="pre">categoryId</span></code> to the method signature:</p>
<div class="code java highlight-none notranslate"><div class="highlight"><pre><span></span>public String processAddCheeseForm(
                @ModelAttribute  @Valid Cheese newCheese,
                Errors errors,
                @RequestParam int categoryId,
                Model model)
</pre></div>
</div>
<p>We’ll need to have the <code class="docutils literal notranslate"><span class="pre">Category</span></code> object corresponding to this ID, so
we can set up the new cheese properly. Get it from the data layer like
this:</p>
<div class="code java highlight-none notranslate"><div class="highlight"><pre><span></span>Category cat = categoryDao.findOne(categoryId);
</pre></div>
</div>
<p>This will fetch a single <code class="docutils literal notranslate"><span class="pre">Category</span></code> object, with ID matching the
<code class="docutils literal notranslate"><span class="pre">CategoryID</span></code> value selected. Then set it:</p>
<div class="code java highlight-none notranslate"><div class="highlight"><pre><span></span>newCheese.setCategory(cat);
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="review-cheese-deletion-code">
<h2>Review Cheese Deletion Code<a class="headerlink" href="#review-cheese-deletion-code" title="Permalink to this headline">¶</a></h2>
<p>The code to remove a <code class="docutils literal notranslate"><span class="pre">Cheese</span></code> object is already in place for you, but
since we won’t have a reason to use the <code class="docutils literal notranslate"><span class="pre">delete</span></code> method on a
<code class="docutils literal notranslate"><span class="pre">CrudRepository</span></code> interface, read the code in
<code class="docutils literal notranslate"><span class="pre">displayRemoveCheeseForm</span></code> and <code class="docutils literal notranslate"><span class="pre">processRemoveCheeseForm</span></code> to see how
to remove an item from the database.</p>
</div>
<div class="section" id="one-more-thing">
<h2>One more thing…<a class="headerlink" href="#one-more-thing" title="Permalink to this headline">¶</a></h2>
<p>We’ve touched almost every file except the <code class="docutils literal notranslate"><span class="pre">cheese/index.html</span></code>
template. Go into that file and update the table to display the category
name of a given cheese instead of its type. Update the header as well,
so it has “Category” in place of “Type”.</p>
</div>
<div class="section" id="id1">
<h2>Test!<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>You made a lot of changes! Great work.</p>
<p>Assuming you don’t have any remaining compiler errors, start up your
application. (Don’t forget to start MAMP first!) Make sure you can
create a new cheese object, selecting a pre-existing category. Then make
sure the proper category name is displayed in the table on the home page
after doing so.</p>
<p>When everything works, move on to <a class="reference external" href="../many-to-many/" target="_blank">Part 3<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
<div class="section" id="bonus-missions">
<h2>Bonus Missions<a class="headerlink" href="#bonus-missions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Within <code class="docutils literal notranslate"><span class="pre">CheeseController</span></code>, create a handler named <code class="docutils literal notranslate"><span class="pre">category</span></code> that
responds to <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests at URLs like <code class="docutils literal notranslate"><span class="pre">/cheese/category/2</span></code>,
where 2 may be the ID of any category in the system. This handler
should retrieve all cheeses in the given category and pass them into
the view. You should use the <code class="docutils literal notranslate"><span class="pre">cheese/index.html</span></code> template to
display the results, with an appropriate title.</li>
</ul>
</div>
<div class="section" id="many-to-many">
<h2>Many-To-Many<a class="headerlink" href="#many-to-many" title="Permalink to this headline">¶</a></h2>
<p>Job to Skills</p>
</div>
<div class="section" id="sql-report">
<h2>SQL Report<a class="headerlink" href="#sql-report" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-submit">
<h2>How to Submit<a class="headerlink" href="#how-to-submit" title="Permalink to this headline">¶</a></h2>
<p>To turn in your assignment and get credit, follow the <a class="reference internal" href="how-to-submit.html#how-to-submit-work"><span class="std std-ref">submission instructions</span></a>.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tech-jobs-mvc.html"><span aria-hidden="true">&larr;</span> Assignment #3: Tech Jobs (MVC Edition)</a></li>
        
        
        <li class="next"><a href="../appendices/spring/thymeleaf.html">Thymeleaf Commands <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/assignments/tech-jobs-persistent.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>