<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Assignment #4: Tech Jobs (Persistent Edition) &#8212; Java Web Development  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Thymeleaf Commands" href="../appendices/spring/thymeleaf.html" />
    <link rel="prev" title="Assignment #3: Tech Jobs (MVC Edition)" href="tech-jobs-mvc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
        </a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<ol class="breadcrumb container">
    <li><a href="../index.html">Contents</a></li>
    <li class="active">Assignment #4: Tech Jobs (Persistent Edition)</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="assignment-4-tech-jobs-persistent-edition">
<span id="tech-jobs-persistent"></span><h1>Assignment #4: Tech Jobs (Persistent Edition)<a class="headerlink" href="#assignment-4-tech-jobs-persistent-edition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="your-task">
<h2>Your Task<a class="headerlink" href="#your-task" title="Permalink to this headline">¶</a></h2>
<p>You will once again work with the <code class="docutils literal notranslate"><span class="pre">techjobs</span></code> application. This time around you’ll add ORM
functionality by using Spring Data. You will be responsible for completing the code to allow users
to create new job data.</p>
</div>
<div class="section" id="checkout-and-review-the-starter-code">
<h2>Checkout and Review the Starter Code<a class="headerlink" href="#checkout-and-review-the-starter-code" title="Permalink to this headline">¶</a></h2>
<p>Fork and clone the starter code from the techjobs persistent repo.
TODO: link to the repo
TODO: describe what has changed from the end result of the last assignment.</p>
<p>We’re no longer using a csv file to load job data, instead, we’ll be creating new Job objects via a
user form. The Job data will be stored in a mySQL database that you’ll setup in Part 1 of this assignment.</p>
<p>You’ll next be tasked with completing the work to persist some of the classes of the job data. As you explore
the starter code, you’ll notice that the <code class="docutils literal notranslate"><span class="pre">JobField</span></code> abstract class is no longer present. Your task for
Part 2 is to complete the work to persist some of the classes.
TODO: clarify which classes they will need to complete.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Job</span></code> class will also look different from how you have last seen it. In Parts 3 and 4, you’ll
add back the <code class="docutils literal notranslate"><span class="pre">employer</span></code> and <code class="docutils literal notranslate"><span class="pre">skills</span></code> (formerly <code class="docutils literal notranslate"><span class="pre">coreCompetency</span></code>) fields on the <code class="docutils literal notranslate"><span class="pre">Job</span></code> class,
using one-to-many and many-to-many relationships.</p>
<p>Finally, wou will be in charge of writing some SQL queries to extract the job data out of the application
into a report.</p>
</div>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Setup the database</li>
<li>Configure an individual class to be managed by Spring Data</li>
<li>Configure a one-to-many relationship to be managed by Spring Data</li>
<li>Configure a many-to-many relationship to be managed by Spring Data</li>
<li>Create a SQL report</li>
</ol>
</div>
<div class="section" id="part-1-setup">
<span id="tech-jobs-persistent-setup"></span><h2>Part 1: Setup<a class="headerlink" href="#part-1-setup" title="Permalink to this headline">¶</a></h2>
<p>Connect a database to a Spring App.</p>
<ol class="arabic">
<li><p class="first">Start MySQL Workbench and create a new schema named <code class="docutils literal notranslate"><span class="pre">techjobs</span></code>.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">Remember to double click on the schema name in the file tree to make it the default schema.</p>
</div>
</li>
<li><p class="first">In the administration tab, create a new user, <code class="docutils literal notranslate"><span class="pre">techjobs</span></code> with the same settings as described in
the lesson tutorial.
TODO: reference the point in the book setting up the new user.</p>
</li>
<li><p class="first">Update <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> with the dependencies.</p>
</li>
<li><p class="first">Update <code class="docutils literal notranslate"><span class="pre">src/resources/application.properties</span></code> with the right info.</p>
</li>
<li><p class="first">Test?</p>
</li>
</ol>
</div>
<div class="section" id="part-2-persisting-a-single-class">
<h2>Part 2: Persisting a Single Class<a class="headerlink" href="#part-2-persisting-a-single-class" title="Permalink to this headline">¶</a></h2>
<p>You will need to have completed the <a class="reference internal" href="#tech-jobs-persistent-setup"><span class="std std-ref">setup steps</span></a> before starting this
section.</p>
<div class="section" id="abstractentity">
<h3><code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code><a class="headerlink" href="#abstractentity" title="Permalink to this headline">¶</a></h3>
<p>We’ve replaced the abstract class <code class="docutils literal notranslate"><span class="pre">JobField</span></code> with an even more abstracted class aptly named,
<code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code>. This class is holds the fields and methods that are common across the <code class="docutils literal notranslate"><span class="pre">Job</span></code> class
and the classes it contains as fields.</p>
<ol class="arabic">
<li><p class="first">We will be creating tables for the subclasses that inherit from
<code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code> but not a table for this parent class. Therefore, give <code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code> the
<code class="docutils literal notranslate"><span class="pre">&#64;MappedSuperClass</span></code> annotation.</p>
</li>
<li><p class="first">Since all of the subclasses of <code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code> will be entities themselves, add the <code class="docutils literal notranslate"><span class="pre">&#64;Id</span></code>
and <code class="docutils literal notranslate"><span class="pre">&#64;GeneratedValue</span></code> annotations to the field <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p>
</li>
<li><p class="first">Each subclass will also inherit the <code class="docutils literal notranslate"><span class="pre">name</span></code> field from <code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code>. Add appropriate
validation annotations so that:</p>
<ol class="loweralpha simple">
<li>a user cannot leave this field blank when creating an object.</li>
<li>there are reasonable limitations on the size of the name string.</li>
</ol>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">TODO: add notes on how to test this validation.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="employer-and-skill">
<h3><code class="docutils literal notranslate"><span class="pre">Employer</span></code> and <code class="docutils literal notranslate"><span class="pre">Skill</span></code><a class="headerlink" href="#employer-and-skill" title="Permalink to this headline">¶</a></h3>
<p>This employer and skill (formerly core competency) information about a particular job will now be stored in classes themselves.
These items themselves will hold their own supplementary information.</p>
<ol class="arabic">
<li><p class="first">In addition to the fields inherited from <code class="docutils literal notranslate"><span class="pre">AbstractEntity</span></code>, <code class="docutils literal notranslate"><span class="pre">Employer</span></code> should have a string
field for <code class="docutils literal notranslate"><span class="pre">location</span></code>. Add this field with validation as you see fit, as well as getters and setters.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">For the purposes of this application, an employer can only have one location.</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Employer</span></code> is a class that will be mapped to one of our tables. Make sure the class has the
<code class="docutils literal notranslate"><span class="pre">&#64;Entity</span></code> annotation, as well as the no-arg constructor required for Hibernate to create an
object.</p>
</li>
<li><p class="first">In <code class="docutils literal notranslate"><span class="pre">Skill</span></code>, add a field for a longer description of the skill. Some hiring managers like to have
more information available about the nature of a given programming language or framework.</p>
</li>
<li><p class="first">As with <code class="docutils literal notranslate"><span class="pre">Employer</span></code>, give this class the <code class="docutils literal notranslate"><span class="pre">&#64;Entity</span></code> annotation and be sure it contains a no-arg
constructor.</p>
</li>
</ol>
</div>
<div class="section" id="setting-up-the-data-layer">
<h3>Setting Up the Data Layer<a class="headerlink" href="#setting-up-the-data-layer" title="Permalink to this headline">¶</a></h3>
<p>To map the <code class="docutils literal notranslate"><span class="pre">Employer</span></code> and <code class="docutils literal notranslate"><span class="pre">Skill</span></code> classes to your techjobs database, you’ll add a new package in
<code class="docutils literal notranslate"><span class="pre">models</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code>. Data will make use of the Spring Data <code class="docutils literal notranslate"><span class="pre">CrudRepository</span></code> class to map our objects.</p>
<ol class="arabic simple">
<li>In <code class="docutils literal notranslate"><span class="pre">models/data</span></code>, create a new interface <code class="docutils literal notranslate"><span class="pre">EmployerRepository</span></code>.<ol class="loweralpha">
<li><code class="docutils literal notranslate"><span class="pre">EmployerRepository</span></code> should extend <code class="docutils literal notranslate"><span class="pre">CrudRepository</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">EmployerRepository</span></code> should be annotated with both <code class="docutils literal notranslate"><span class="pre">&#64;Repository</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;Transactional</span></code>.</li>
</ol>
</li>
<li>Repeat the steps above for an interface, <code class="docutils literal notranslate"><span class="pre">SkillRepository</span></code>.</li>
</ol>
</div>
<div class="section" id="adding-jobs">
<h3>Adding Jobs<a class="headerlink" href="#adding-jobs" title="Permalink to this headline">¶</a></h3>
<p>TODO* STart with employer controller!</p>
<p>With the data repositories in place, we can reference these to send object information through
controller handlers. <code class="docutils literal notranslate"><span class="pre">HomeController</span></code> contains handlers for the index page of the application,
as well as the views for adding and viewing individual jobs.</p>
<ol class="arabic simple">
<li>Add a private field of <code class="docutils literal notranslate"><span class="pre">JobRepository</span></code> type called <code class="docutils literal notranslate"><span class="pre">jobRepository</span></code> to <code class="docutils literal notranslate"><span class="pre">HomeController</span></code>.
Give this field an <code class="docutils literal notranslate"><span class="pre">&#64;Autowired</span></code> annotation.</li>
</ol>
</div>
<div class="section" id="view-all-jobs">
<h3>View All Jobs<a class="headerlink" href="#view-all-jobs" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>create view template for accessing individual job info.</li>
</ol>
</div>
<div class="section" id="add-jobs">
<h3>Add Jobs<a class="headerlink" href="#add-jobs" title="Permalink to this headline">¶</a></h3>
<p>#. Next, we want to enable the user to create a new category via a form.
This will require multiple steps.</p>
</div>
<div class="section" id="add-handler-methods">
<h3>Add Handler Methods<a class="headerlink" href="#add-handler-methods" title="Permalink to this headline">¶</a></h3>
<p>Let’s add controller handlers to render and process the form.</p>
<ol class="arabic simple">
<li>create an add handler in homecontroller for adding jobs</li>
<li>create another handler for the posting of this form</li>
<li>check for object validation and if good, use the crudrepository mehtod to save the object</li>
</ol>
</div>
<div class="section" id="add-view">
<h3>Add View<a class="headerlink" href="#add-view" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>create the template to add jobs via a form</li>
</ol>
</div>
<div class="section" id="adding-navigation-links">
<h3>Adding Navigation Links<a class="headerlink" href="#adding-navigation-links" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>add a link to the add jobs form - TechJobs title in the nav bar</li>
</ol>
</div>
<div class="section" id="test">
<h3>Test!<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>Start up your application – don’t forget to have our SQL server running – and try
to add a new job!</p>
<p>Click on the <em>TechJobs</em> navigation link, then on <em>Add Job</em>.
Complete the form, and if everything works as expected, you’ll see your
new job in the list. If everything seems to work – that is, you are
able to submit the form without any errors – but you don’t see your
job in the list, here’s what you should check:</p>
<ul class="simple">
<li>Is there any data in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> table? Check by going to MySQL Workbench
and looking for the job data within your schema.</li>
</ul>
<ul class="simple">
<li>If there’s data in the database, check that you are correctly
querying for the list of all jobs in the controller
findAll()``?</li>
<li>Ensure you’re passing this list into the view, and looping over the
list of jobs to display them in the page.</li>
</ul>
<p>When everything works, move on to Part 2 below.</p>
</div>
</div>
<div class="section" id="part-2-setting-up-a-one-to-many-relationship">
<h2>Part 2: Setting Up a One-to-Many Relationship<a class="headerlink" href="#part-2-setting-up-a-one-to-many-relationship" title="Permalink to this headline">¶</a></h2>
<p>One job has one employer. One employer can have many jobs.</p>
<div class="section" id="add-an-employer-to-a-job">
<h3>Add an Employer to a Job<a class="headerlink" href="#add-an-employer-to-a-job" title="Permalink to this headline">¶</a></h3>
<p>Within <code class="docutils literal notranslate"><span class="pre">Employer</span></code>, add a private property <code class="docutils literal notranslate"><span class="pre">jobs</span></code> of type
<code class="docutils literal notranslate"><span class="pre">List&lt;Job&gt;</span></code> and initialize it to an empty <code class="docutils literal notranslate"><span class="pre">ArrayList</span></code>. After we
set up the <code class="docutils literal notranslate"><span class="pre">Job</span></code> class to work with <code class="docutils literal notranslate"><span class="pre">Employer</span></code> objects, this list
will represent the list of all items in a given job. We’ll do this
in a bit.</p>
<ol class="arabic simple">
<li>use the onetomany and join column annotations on the jobs list in Employer class</li>
</ol>
</div>
<div class="section" id="replace-string-employer-with-employer-object">
<h3>Replace String Employer with Employer Object<a class="headerlink" href="#replace-string-employer-with-employer-object" title="Permalink to this headline">¶</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">Employer</span></code> class as a field on Job objects will be much
more flexible, as it will allow users to create new employers
themselves.</p>
<ol class="arabic simple">
<li>add the &#64;manytoone annotation on an employer field in Job</li>
</ol>
</div>
<div class="section" id="updating-homecontroller">
<h3>Updating HomeController<a class="headerlink" href="#updating-homecontroller" title="Permalink to this headline">¶</a></h3>
<p>We’ll make several updates here.</p>
<div class="section" id="displayaddjobform">
<h4>displayAddJobForm<a class="headerlink" href="#displayaddjobform" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>wire up homecontroller with the employerrepository.</li>
<li>update the addjob handlers so that they grab the employer information</li>
<li>update the add job form to include an employer selection option</li>
</ol>
</div>
<div class="section" id="processaddcjobform">
<h4>processAddCJobForm<a class="headerlink" href="#processaddcjobform" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>add request param from employer info on job object submission.</li>
<li>use .findbyId(). else…. to  select employer obj chosen</li>
<li>Job object .setEmployer</li>
</ol>
</div>
</div>
<div class="section" id="review-job-deletion-code">
<h3>Review Job Deletion Code<a class="headerlink" href="#review-job-deletion-code" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>have the students write soemthing to delete jobs?</li>
</ol>
</div>
<div class="section" id="update-job-view">
<h3>Update Job View<a class="headerlink" href="#update-job-view" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>update view template to display employer info on given job object.</li>
</ol>
</div>
<div class="section" id="id1">
<h3>Test!<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>You made a lot of changes! Great work.</p>
<p>Assuming you don’t have any remaining compiler errors, start up your
application. (Don’t forget to start your SQL server first.) Make sure you can
create a new job object, selecting a pre-existing employer. Then make
sure the proper employer name is displayed in the table on the home page
after doing so.</p>
<p>When everything works, move on to Part 3 below.</p>
</div>
</div>
<div class="section" id="part-3-setting-up-a-many-to-many-relationship">
<h2>Part 3: Setting Up a Many-to-Many Relationship<a class="headerlink" href="#part-3-setting-up-a-many-to-many-relationship" title="Permalink to this headline">¶</a></h2>
<p>A Job requires many skills and a skill can be associated with several jobs.</p>
<div class="section" id="creating-the-skill-model">
<h3>Creating the Skill Model<a class="headerlink" href="#creating-the-skill-model" title="Permalink to this headline">¶</a></h3>
<p>This final section of the studio has us set up a many-to-many
relationship between two classes. The classes in question will be
<code class="docutils literal notranslate"><span class="pre">Job</span></code> and <code class="docutils literal notranslate"><span class="pre">Skill</span></code>.</p>
<div class="section" id="the-skill-class">
<h4>The Skill Class<a class="headerlink" href="#the-skill-class" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>add &#64;entity annotaiton to skill class</li>
<li>add a field named Jobs that is a list</li>
<li>add the &#64;manytomany annotation to this field</li>
</ol>
</div>
<div class="section" id="the-skillrepository-interface">
<h4>The SkillRepository Interface<a class="headerlink" href="#the-skillrepository-interface" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>create Skills Repository witht he right super class and annotations</li>
</ol>
</div>
<div class="section" id="setting-up-the-other-side-of-the-relationship">
<h4>Setting Up the Other Side of the Relationship<a class="headerlink" href="#setting-up-the-other-side-of-the-relationship" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>add the manytomany annotation onto a skills field in the job class</li>
<li>add the mapped by skills argument</li>
</ol>
</div>
</div>
<div class="section" id="the-skillcontroller-class-and-views">
<h3>The SkillController Class and Views<a class="headerlink" href="#the-skillcontroller-class-and-views" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>add skillrepository as autowired field to home controller so that a new job can be added with skills</li>
</ol>
</div>
</div>
<div class="section" id="clean-up-the-navigation">
<h2>Clean Up the Navigation<a class="headerlink" href="#clean-up-the-navigation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>to the navbar, add options to view a list of employers and skills</li>
</ol>
</div>
<div class="section" id="id2">
<h2>Test!<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Run your application and make sure you can create a new job with several skills.</p>
<p>When everything works, you’re done! Congrats!</p>
</div>
<div class="section" id="sql-report">
<h2>SQL Report<a class="headerlink" href="#sql-report" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-submit">
<h2>How to Submit<a class="headerlink" href="#how-to-submit" title="Permalink to this headline">¶</a></h2>
<p>To turn in your assignment and get credit, follow the <a class="reference internal" href="how-to-submit.html#how-to-submit-work"><span class="std std-ref">submission instructions</span></a>.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="tech-jobs-mvc.html"><span aria-hidden="true">&larr;</span> Assignment #3: Tech Jobs (MVC Edition)</a></li>
        
        
        <li class="next"><a href="../appendices/spring/thymeleaf.html">Thymeleaf Commands <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/assignments/tech-jobs-persistent.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>